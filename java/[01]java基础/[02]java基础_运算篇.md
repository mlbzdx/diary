# **Java 运算符全面指南（初学者版）**

## **一、运算符总体介绍**
运算符是用于对变量和值进行操作的符号。Java 提供了丰富的运算符，可分为以下几类：

| **运算符类别**   | **主要运算符**                 | **作用**         |
| ---------------- | ------------------------------ | ---------------- |
| **算术运算符**   | `+`, `-`, `*`, `/`, `%`        | 数学计算         |
| **赋值运算符**   | `=`, `+=`, `-=`, `*=`          | 赋值操作         |
| **扩展运算符**   | `++`, `--`                     | 自增/自减        |
| **关系运算符**   | `==`, `!=`, `>`, `<`           | 比较大小或相等性 |
| **逻辑运算符**   | `&&`, `||`, `!`                | 逻辑判断         |
| **位运算符**     | `&`, `|`, `^`, `~`, `<<`, `>>` | 二进制位操作     |
| **条件运算符**   | `? :`                          | 三元条件判断     |
| **字符串连接符** | `+`                            | 拼接字符串       |

---

## **二、算术运算符**
### 一、算术运算符分类  
算术运算符根据操作数的数量可以分为两类：  

#### 1. 一元算术运算符  
**特点**：只需要一个操作数  
**主要运算符**：  
- `+`（正号）  
- `-`（负号）  
- `++`（自增）  
- `--`（自减）  

#### 2. 二元算术运算符  
**特点**：需要两个操作数  
**主要运算符**：  
- `+`（加法）  
- `-`（减法）  
- `*`（乘法）  
- `/`（除法）  
- `%`（取模）  

---

### 二、一元算术运算符详解  

#### 1. 正号（+）和负号（-）  
- `+a`：保持数值不变（通常省略）  
- `-a`：取相反数  

**示例**：  
```java
int a = 5;
System.out.println(+a);  // 输出 5
System.out.println(-a);  // 输出 -5
```

#### 2. 自增（++）和自减（--）  
| **运算符** | **示例**       | **说明**                |
| ---------- | -------------- | ----------------------- |
| `a++`      | `int b = a++;` | 先使用 `a` 的值，再自增 |
| `++a`      | `int b = ++a;` | 先自增，再使用 `a` 的值 |
| `a--`      | `int b = a--;` | 先使用 `a` 的值，再自减 |
| `--a`      | `int b = --a;` | 先自减，再使用 `a` 的值 |

**示例**：  
```java
int x = 5;
int y = x++;  // y = 5, x = 6
int z = ++x;  // z = 7, x = 7
```

---

### 三、二元算术运算符详解  

#### 1. 基本运算规则  
| **运算符** | **运算规则** | **示例** | **结果**        |
| ---------- | ------------ | -------- | --------------- |
| `+`        | 加法         | `5 + 3`  | `8`             |
| `-`        | 减法         | `5 - 3`  | `2`             |
| `*`        | 乘法         | `5 * 3`  | `15`            |
| `/`        | 除法         | `5 / 3`  | `1`（整数除法） |
| `%`        | 取模（求余） | `5 % 3`  | `2`             |

#### 2. 整数除法 vs 浮点数除法  
- **整数除法**：直接截断小数部分  
```java
int a = 5 / 3;  // 结果为 1
```

- **浮点数除法**：保留小数  
```java
double b = 5.0 / 3;  // 结果为 1.666...
```

#### 3. 取模运算（%）  
- **作用**：计算两数相除的余数  
- **符号**：与被除数一致  

**示例**：  
```java
System.out.println(5 % 3);   // 2
System.out.println(-5 % 3);  // -2
System.out.println(5 % -3);  // 2
```

#### 4. 运算优先级  
**优先级顺序**：  
1. `++`、`--`（一元运算符）  
2. `*`、`/`、`%`  
3. `+`、`-`  

**可以用 `()` 改变运算顺序**  

**示例**：  
```java
int result = 5 + 3 * 2;  // 先算 3*2=6，再算 5+6=11
System.out.println(result);  // 输出 11
```



### **四、类型提升规则**

| **操作数类型**            | **提升规则**     | **结果类型** |
| ------------------------- | ---------------- | ------------ |
| `byte`, `short`, `char`   | 自动提升为 `int` | `int`        |
| 含 `long`                 | 提升为 `long`    | `long`       |
| 含 `float`（无 `double`） | 提升为 `float`   | `float`      |
| 含 `double`               | 提升为 `double`  | `double`     |

1. 整数运算：

   - 无 `long` → 按 `int` 计算。

     ```java
       byte a = 5;
       short b = 10;
       int c = a + b;  // byte 和 short 自动提升为 int，结果为 int
     ```

   - 有 `long` → 按 `long` 计算。

     ```java
       int a = 5;
       long b = 10L;
       long c = a + b;  // int 自动提升为 long，结果为 long
     ```

2. 浮点数运算：

   - 无 `double` → 按 `float` 计算。

     ```java
       float a = 3.14f;
       int b = 2;
       float c = a * b;  // int 自动提升为 float，结果为 float
     ```

   - 有 `double` → 按 `double` 计算。

     ```java
       float a = 3.14f;
       double b = 2.0;
       double c = a * b;  // float 自动提升为 double，结果为 double
     ```

3. 混合运算：

   - 整数会向浮点数提升（`int` → `float` → `double`）。

     ```java
       int a = 5;
       double b = 2.0;
       double c = a / b;  // int 提升为 double，结果为 2.5
     ```

     



---

## **三、赋值运算符**
用于给变量赋值：

| **运算符** | **示例** | **等价写法** |
| ---------- | -------- | ------------ |
| `=`        | `a = 5`  | `a = 5`      |
| `+=`       | `a += 3` | `a = a + 3`  |
| `-=`       | `a -= 2` | `a = a - 2`  |
| `*=`       | `a *= 4` | `a = a * 4`  |
| `/=`       | `a /= 2` | `a = a / 2`  |
| `%=`       | `a %= 3` | `a = a % 3`  |

**示例**：
```java
int x = 10;
x += 5; // x = x + 5 → 15
x %= 3; // x = x % 3 → 0
```

---

## **四、扩展运算符（自增/自减）**
用于变量自增或自减：

| **运算符** | **示例**       | **说明** |
| ---------- | -------------- | -------- |
| `++`       | `a++` 或 `++a` | 自增1    |
| `--`       | `a--` 或 `--a` | 自减1    |

**`a++`（后置） vs `++a`（前置）的区别**：

```java
int a = 5;
int b = a++; // b = 5, a = 6（先赋值，再自增）
int c = ++a; // c = 7, a = 7（先自增，再赋值）
```

---

## **五、关系运算符**
关系运算符是用于比较两个值之间关系的重要工具，它会返回一个布尔值（`true` 或 `false`）。在控制程序流程（如 `if` 条件、循环等）中，关系运算符起到了关键作用。



### **一、关系运算符列表**

Java 提供了以下 6 种关系运算符：

| **运算符** | **名称**   | **示例** | **功能**                     |
| ---------- | ---------- | -------- | ---------------------------- |
| `==`       | 等于       | `a == b` | 判断两个值是否相等```        |
| `!=`       | 不等于     | `a != b` | 判断两个值是否不相等         |
| `>`        | 大于       | `a > b`  | 判断左侧值是否大于右侧值     |
| `<`        | 小于       | `a < b`  | 判断左侧值是否小于右侧值     |
| `>=`       | 大于或等于 | `a >= b` | 判断左侧值是否大于等于右侧值 |
| `<=`       | 小于或等于 | `a <= b` | 判断左侧值是否小于等于右侧值 |

---

### **二、使用示例**

#### **1. 基本数据类型比较**
关系运算符可以直接用于比较基本数据类型的值：

```java
int a = 10, b = 20;

System.out.println(a == b);  // false
System.out.println(a != b);  // true
System.out.println(a > b);   // false
System.out.println(a < b);   // true
System.out.println(a >= 10); // true
System.out.println(b <= 20); // true
```

#### **2. 浮点数比较的注意事项**
由于浮点数的精度问题，直接使用关系运算符比较可能会产生不准确的结果：

```java
double x = 0.1 + 0.2; // 实际值 ≈ 0.30000000000000004
System.out.println(x == 0.3); // false（错误！）

// 正确做法：使用误差范围
System.out.println(Math.abs(x - 0.3) < 0.00001); // true
```

#### **3. 对象比较（`==` vs `equals()`）**
- `==` 用于比较对象的**引用地址**是否相同。
- `equals()` 用于比较对象的**内容**是否相同（需要重写 `equals()` 方法）。

```java
String s1 = new String("hello");
String s2 = new String("hello");

System.out.println(s1 == s2);       // false（不同对象）
System.out.println(s1.equals(s2)); // true（内容相同）
```

---

### **三、运算符优先级**

关系运算符的优先级低于算术运算符，但高于逻辑运算符。例如：

```java
int a = 5, b = 3, c = 2;
boolean result = a + b > c * 2; // 先计算 a+b=8 和 c*2=4，再比较 8>4
System.out.println(result);    // true
```

---

### **四、常见面试问题**

#### **1. `==` 和 `equals()` 的区别**
- `==` 用于比较基本类型的值或对象的引用地址。
- `equals()` 用于比较对象的内容（默认行为与 `==` 相同，需重写以实现更复杂的比较逻辑）。

#### **2. 如何安全地比较浮点数**
浮点数比较建议使用以下两种方法：
- **误差范围**：`Math.abs(a - b) < 1e-6`。
- **使用 `BigDecimal`**：通过 `BigDecimal` 提供更高精度的计算。

#### **3. 为什么 `"hello" == "hello"` 可能返回 `true`**
由于 Java 的字符串常量池优化机制，相同的字符串字面量可能会指向同一个对象。例如：

```java
String s1 = "hello";
String s2 = "hello";

System.out.println(s1 == s2); // true（指向同一对象）
```

---

### **五、总结**

#### **1. 关系运算符的作用**
关系运算符用于比较值的大小或相等性，返回布尔值结果。

#### **2. 使用关键点**
- **浮点数比较**：使用误差范围或 `BigDecimal`。
- **对象比较**：区分 `==` 和 `equals()`。
- **优先级规则**：算术运算符 > 关系运算符 > 逻辑运算符。

关系运算符是 Java 编程中的基础工具，掌握它们的使用和注意事项能够帮助我们更好地控制程序的逻辑流程。

---

## **六、逻辑运算符**
用于组合多个条件：

| **运算符** | **示例** | **说明**                                    |
| ---------- | -------- | ------------------------------------------- |
| `&&`       | `a && b` | 逻辑与（两个条件都为 `true` 才返回 `true`） |
| `||`       | `a || b` | 逻辑或（至少一个为 `true` 就返回 `true`）   |
| `!`        | `!a`     | 逻辑非（取反）                              |

**短路特性（Short-Circuiting）**：
- `&&`：如果第一个条件为 `false`，不再计算第二个条件。
- `||`：如果第一个条件为 `true`，不再计算第二个条件。

**示例**：
```java
boolean a = true, b = false;
System.out.println(a && b); // false
System.out.println(a || b); // true
System.out.println(!a);     // false
```

---

## **七、位运算符（二进制操作）**
位运算符直接操作整数的二进制位，广泛应用于底层开发、性能优化和特定算法场景。以下是详细解析：

---

#### **一、位运算符列表**

| **运算符** | **名称**       | **示例**  | **运算规则**（按二进制位）                  |
| ---------- | -------------- | --------- | ------------------------------------------- |
| `&`        | 按位与         | `a & b`   | 两位均为1时结果为1，否则为0                 |
| `\|`       | 按位或         | `a \| b`  | 两位至少有一个为1时结果为1，否则为0         |
| `^`        | 按位异或       | `a ^ b`   | 两位不同时结果为1，相同时为0                |
| `~`        | 按位取反       | `~a`      | 所有位取反（0变1，1变0）                    |
| `<<`       | 左移           | `a << n`  | 所有位左移n位，低位补0                      |
| `>>`       | 右移（带符号） | `a >> n`  | 所有位右移n位，高位补符号位（正补0，负补1） |
| `>>>`      | 无符号右移     | `a >>> n` | 所有位右移n位，高位补0                      |

---

#### **二、逐项详解**

##### **1. 按位与（`&`）**
- **规则**：两位均为1时结果为1，否则为0。
- **示例**：
  ```java
  int a = 5; // 二进制: 0101
  int b = 3; // 二进制: 0011
  int c = a & b; // 结果: 0001 (十进制1)
  ```
- **应用场景**：
  - **掩码操作**（提取特定位）：
    ```java
    int flags = 0b1101;
    int mask = 0b1000;
    boolean isSet = (flags & mask) != 0; // 检查第4位是否为1
    ```

##### **2. 按位或（`|`）**
- **规则**：两位至少有一个为1时结果为1。
- **示例**：
  
  ```java
  int a = 5; // 0101
  int b = 3; // 0011
  int c = a | b; // 0111 (十进制7)
  ```
- **应用场景**：
  - **设置特定位为1**：
    ```java
    int flags = 0b1001;
    int setBit = flags | 0b0010; // 将第2位设为1 → 0b1011
    ```

##### **3. 按位异或（`^`）**
- **规则**：两位不同时结果为1，相同时为0。
- **特性**：
  - 任何数异或自己结果为0：`a ^ a = 0`
  - 异或同一个数两次会还原：`a ^ b ^ b = a`
- **示例**：
  ```java
  int a = 5; // 0101
  int b = 3; // 0011
  int c = a ^ b; // 0110 (十进制6)
  ```
- **应用场景**：
  - **交换两个变量的值（无需临时变量）**：
    ```java
    int x = 5, y = 3;
    x = x ^ y;
    y = x ^ y; // y = (x ^ y) ^ y = x
    x = x ^ y; // x = (x ^ y) ^ x = y
    ```
  - **简单加密**：
    ```java
    int data = 42;
    int key = 0x55;
    int encrypted = data ^ key; // 加密
    int decrypted = encrypted ^ key; // 解密
    ```

##### **4. 按位取反（`~`）**
- **规则**：所有位取反（包括符号位）。
- **示例**：
  
  ```java
  int a = 5; // 0000...0101
  int b = ~a; // 1111...1010 (十进制-6)
  ```
- **注意**：
  - 取反后结果为负数（因为最高位符号位变为1）。

##### **5. 左移（`<<`）**
- **规则**：所有位左移n位，低位补0，高位溢出丢弃。
- **等效计算**：`a << n` ≈ `a * 2ⁿ`（不考虑溢出）。
- **示例**：
  ```java
  int a = 5; // 0101
  int b = a << 2; // 010100 → 20 (5×2²)
  ```
- **应用场景**：
  - **快速计算2的幂次乘法**：
    ```java
    int powerOfTwo = 1 << 10; // 1024 (2^10)
    ```

##### **6. 右移（`>>`）**
- **规则**：带符号右移，高位补符号位（正数补0，负数补1）。
- **等效计算**：`a >> n` ≈ `a / 2ⁿ`（向下取整）。
- **示例**：
  ```java
  int a = 20; // 0001 0100
  int b = a >> 2; // 0000 0101 → 5 (20/2²)
  
  int c = -20; // 1110 1100（补码）
  int d = c >> 2; // 1111 1011 → -5（保持符号）
  ```

##### **7. 无符号右移（`>>>`）**
- **规则**：右移时高位补0（忽略符号位）。
- **与 `>>` 的区别**：对负数右移结果会变为正数。
- **示例**：
  ```java
  int a = -20; // 1111...10100
  int b = a >>> 2; // 0011...11101 → 大正整数
  ```

---

#### **三、关键注意事项**

##### **1. 操作数类型**
- 位运算符仅适用于整数类型（`byte`、`short`、`char`、`int`、`long`）。
- 操作前会先将 `byte`、`short`、`char` 提升为 `int`。

##### **2. 位移位数限制**
- 对 `int` 类型，右操作数取低5位（`n & 0x1F`），即实际位移范围是0~31。
- 对 `long` 类型，取低6位（`n & 0x3F`），范围0~63。

##### **3. 性能优化**
- 位运算比乘除法更快，但现代编译器会自动优化，无需过度使用。

---

#### **四、应用场景**

| **场景**            | **示例**                                |
| ------------------- | --------------------------------------- |
| 权限控制（掩码）    | `int READ = 1, WRITE = 2, EXECUTE = 4;` |
| 快速乘除2的幂次     | `a << 3` 代替 `a * 8`                   |
| 颜色处理（RGB拆分） | `int red = (color >> 16) & 0xFF;`       |
| 数据加密/校验       | 使用异或进行简单加密                    |

---

#### **五、面试常见问题**

##### **1. 如何判断一个数是奇数还是偶数？**
```java
boolean isOdd = (num & 1) == 1; // 最末位为1则是奇数
```

##### **2. 如何计算 `2ⁿ`？**
```java
int power = 1 << n; // 注意n不能过大（避免溢出）
```

##### **3. `x ^ y ^ y` 的结果是什么？**
- **答案**：`x`（异或同一个数两次会还原）。

---

---

## **八、条件运算符（三元运算符）**
用于简化 `if-else` 语句：

**语法**：

```java
条件 ? 表达式1 : 表达式2
```
- 如果 `条件` 为 `true`，返回 `表达式1`，否则返回 `表达式2`。

**示例**：
```java
int age = 20;
String status = (age >= 18) ? "成年人" : "未成年人";
System.out.println(status); // 输出 "成年人"
```

---

## **九、字符串连接符**
`+` 用于拼接字符串：

```java
String name = "Alice";
int age = 25;
System.out.println("Name: " + name + ", Age: " + age);
// 输出：Name: Alice, Age: 25
```

---

## **十、运算符优先级**
运算符的执行顺序（从高到低）：

| **优先级** | **运算符**                 | 类                   |
| ---------- | -------------------------- | -------------------- |
| 1          | `()`                       | 括号运算符           |
| 2          | `!`, `+`(正号),`-`（负号） | 一元运算符           |
| 3          | `~`                        | 位运算符             |
| 4          | `++`, `--`,                | 递增和递减运算符     |
| 5          | `*`, `/`, `%`              | 算术运算符           |
| 3          | `+`, `-`                   | 算术运算符           |
| 4          | `<<`, `>>`, `>>>`          | 位左移，右移运算符   |
| 5          | `<`, `<=`, `>`, `>=`       | 关系运算符           |
| 6          | `==`, `!=`                 | 关系运算符           |
| 7          | `&`                        | 位运算符、逻辑运算符 |
| 8          | `^`                        | 位运算符、逻辑运算符 |
| 9          | `|`                        | 位运算符、逻辑运算符 |
| 10         | `&&`                       | 逻辑运算符           |
| 11         | `||`                       | 逻辑运算符           |
| 12         | `? :`                      | 条件运算符           |
| 13         | `=`, `+=`, `-=`, `*=`      | 赋值或扩展运算符     |

总结：

- 括号是优先的
- 算术运算符比关系运算符优先级更高
- 逻辑运算中与比或优先级更高

**示例**：

```java
int result = 5 + 3 * 2; // 先算 3*2=6，再算 5+6=11
System.out.println(result); // 11
```

---

### **总结**
- **算术运算符**：`+`, `-`, `*`, `/`, `%`
- **赋值运算符**：`=`, `+=`, `-=`, `*=`
- **自增/自减**：`++`, `--`
- **关系运算符**：`==`, `!=`, `>`, `<`
- **逻辑运算符**：`&&`, `||`, `!`
- **位运算符**：`&`, `|`, `^`, `~`, `<<`, `>>`
- **条件运算符**：`? :`
- **字符串连接符**：`+`
- **优先级**：`()` 可以改变运算顺序