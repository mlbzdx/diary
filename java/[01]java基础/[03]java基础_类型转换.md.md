# **Java ç±»å‹è½¬æ¢è¯¦è§£**

ç±»å‹è½¬æ¢æ˜¯ Java ç¼–ç¨‹ä¸­å¤„ç†ä¸åŒæ•°æ®ç±»å‹é—´äº¤äº’çš„æ ¸å¿ƒæœºåˆ¶ï¼Œä¸»è¦åŒ…æ‹¬ **è‡ªåŠ¨ç±»å‹è½¬æ¢ï¼ˆéšå¼ï¼‰** å’Œ **å¼ºåˆ¶ç±»å‹è½¬æ¢ï¼ˆæ˜¾å¼ï¼‰**ã€‚ä»¥ä¸‹æ˜¯è¯¦ç»†è§£æï¼š

---

#### **ä¸€ã€è‡ªåŠ¨ç±»å‹è½¬æ¢ï¼ˆéšå¼è½¬æ¢ï¼‰**

##### **1. å®šä¹‰**
å½“å°èŒƒå›´æ•°æ®ç±»å‹èµ‹å€¼ç»™å¤§èŒƒå›´æ•°æ®ç±»å‹æ—¶ï¼ŒJava è‡ªåŠ¨å®Œæˆè½¬æ¢ï¼Œæ— éœ€ç¨‹åºå‘˜å¹²é¢„ã€‚

##### **2. é€‚ç”¨åœºæ™¯**
- èµ‹å€¼æ“ä½œ
- ç®—æœ¯è¿ç®—ä¸­çš„ç±»å‹æå‡

##### **3. è½¬æ¢è§„åˆ™**
###### **åŸºæœ¬æ•°æ®ç±»å‹è½¬æ¢æ–¹å‘ï¼ˆä»å°åˆ°å¤§ï¼‰**
```mermaid
graph LR
byte --> short
short --> int
char --> int
int --> long
long --> float
float --> double
```

###### **ç¤ºä¾‹**
```java
int a = 100;
long b = a; // è‡ªåŠ¨å°† int è½¬ä¸º long

double x = 3.14f; // float è‡ªåŠ¨è½¬ double
```

##### **4. è¿ç®—æ—¶çš„è‡ªåŠ¨æå‡**
- å¦‚æœè¡¨è¾¾å¼åŒ…å«ä¸åŒæ•°æ®ç±»å‹ï¼Œç»“æœè‡ªåŠ¨æå‡ä¸ºèŒƒå›´æœ€å¤§çš„ç±»å‹ï¼š
```java
int a = 5;
double b = 2.5;
double c = a + b; // int è‡ªåŠ¨æå‡ä¸º double
```

---

#### **äºŒã€å¼ºåˆ¶ç±»å‹è½¬æ¢ï¼ˆæ˜¾å¼è½¬æ¢ï¼‰**

##### **1. å®šä¹‰**
å½“å¤§èŒƒå›´æ•°æ®ç±»å‹èµ‹å€¼ç»™å°èŒƒå›´æ•°æ®ç±»å‹æ—¶ï¼Œéœ€è¦æ˜¾å¼å£°æ˜è½¬æ¢ï¼Œå¯èƒ½ä¸¢å¤±ç²¾åº¦ã€‚

##### **2. è¯­æ³•**
```java
ç›®æ ‡ç±»å‹ å˜é‡å = (ç›®æ ‡ç±»å‹)æºæ•°æ®;
```

##### **3. ç¤ºä¾‹**
###### **åŸºæœ¬æ•°æ®ç±»å‹è½¬æ¢**
```java
double a = 3.14;
int b = (int)a; // å¼ºåˆ¶è½¬æ¢ä¸º intï¼Œb=3ï¼ˆä¸¢å¤±å°æ•°éƒ¨åˆ†ï¼‰

long c = 300L;
short d = (short)c; // è‹¥ c åœ¨ short èŒƒå›´å†…ï¼Œæ— é—®é¢˜
```

###### **å¯¹è±¡ç±»å‹è½¬æ¢**
```java
Object obj = "Hello";
String str = (String)obj; // å¼ºåˆ¶è½¬æ¢ä¸º String
```

##### **4. æ³¨æ„äº‹é¡¹**
- **æ•°æ®æº¢å‡ºé£é™©**ï¼š
```java
int a = 200;
byte b = (byte)a; // b=-56ï¼ˆæº¢å‡ºï¼‰
```
- **å¸ƒå°”ç±»å‹ä¸å¯è½¬æ¢**ï¼š
```java
// boolean flag = (boolean)1; // ç¼–è¯‘é”™è¯¯ï¼
```

---

#### **ä¸‰ã€ç‰¹æ®Šç±»å‹è½¬æ¢åœºæ™¯**

##### **1. å­—ç¬¦ä¸²ä¸å…¶ä»–ç±»å‹çš„è½¬æ¢**
###### **å…¶ä»–ç±»å‹ â†’ å­—ç¬¦ä¸²**
```java
int a = 10;
String s1 = a + ""; // æ–¹æ³•1ï¼šæ‹¼æ¥ç©ºå­—ç¬¦ä¸²
String s2 = String.valueOf(a); // æ–¹æ³•2ï¼šæ¨èæ–¹å¼
```

###### **å­—ç¬¦ä¸² â†’ å…¶ä»–ç±»å‹**
```java
String s = "123";
int a = Integer.parseInt(s); // String è½¬ int
double b = Double.parseDouble(s); // String è½¬ double
```

##### **2. åŒ…è£…ç±»ä¸åŸºæœ¬ç±»å‹çš„è½¬æ¢ï¼ˆè‡ªåŠ¨è£…ç®±/æ‹†ç®±ï¼‰**
```java
// è‡ªåŠ¨è£…ç®±
Integer i = 10; // ç¼–è¯‘å™¨è½¬æ¢ä¸º Integer.valueOf(10)

// è‡ªåŠ¨æ‹†ç®±
int j = i; // ç¼–è¯‘å™¨è½¬æ¢ä¸º i.intValue()
```

---

#### **å››ã€ç±»å‹è½¬æ¢çš„åº•å±‚åŸç†**

##### **1. åŸºæœ¬æ•°æ®ç±»å‹è½¬æ¢**
- **æ‰©å±•å¡«å……**ï¼ˆå°è½¬å¤§ï¼‰ï¼š
  - `int` â†’ `long`ï¼šé«˜ä½è¡¥0
  - `float` â†’ `double`ï¼šæ‰©å±•å°æ•°ä½
- **æˆªæ–­ä¸¢å¼ƒ**ï¼ˆå¤§è½¬å°ï¼‰ï¼š
  - `double` â†’ `int`ï¼šç›´æ¥ä¸¢å¼ƒå°æ•°éƒ¨åˆ†
  - `long` â†’ `short`ï¼šä»…ä¿ç•™ä½16ä½

##### **2. å¯¹è±¡ç±»å‹è½¬æ¢**
- **å‘ä¸Šè½¬å‹ï¼ˆUpcastingï¼‰**ï¼šå­ç±»â†’çˆ¶ç±»ï¼ˆè‡ªåŠ¨å®Œæˆï¼‰
```java
Animal cat = new Cat(); // Cat æ˜¯ Animal çš„å­ç±»
```
- **å‘ä¸‹è½¬å‹ï¼ˆDowncastingï¼‰**ï¼šçˆ¶ç±»â†’å­ç±»ï¼ˆéœ€å¼ºåˆ¶è½¬æ¢ï¼‰
```java
Animal animal = new Cat();
Cat cat = (Cat)animal; // éœ€è¿è¡Œæ—¶æ£€æŸ¥ç±»å‹
```

---

#### **äº”ã€å¸¸è§é¢è¯•é—®é¢˜**

##### **1. `int` å’Œ `Integer` çš„åŒºåˆ«ï¼Ÿ**
- `int` æ˜¯åŸºæœ¬ç±»å‹ï¼Œ`Integer` æ˜¯åŒ…è£…ç±»ã€‚
- `Integer` æ”¯æŒ `null`ï¼Œè€Œ `int` é»˜è®¤å€¼ä¸º0ã€‚

##### **2. ä»¥ä¸‹ä»£ç çš„è¾“å‡ºæ˜¯ä»€ä¹ˆï¼Ÿ**
```java
double a = 5 / 2;
System.out.println(a); // 2.0ï¼ˆæ•´æ•°é™¤æ³•åè½¬ doubleï¼‰
```
**ä¿®æ­£æ–¹æ³•**ï¼š
```java
double a = 5.0 / 2; // æˆ– 5 / 2.0
```

##### **3. å¦‚ä½•é¿å…å¼ºåˆ¶è½¬æ¢æ—¶çš„ `ClassCastException`ï¼Ÿ**
ä½¿ç”¨ `instanceof` æ£€æŸ¥ç±»å‹ï¼š
```java
if (animal instanceof Cat) {
    Cat cat = (Cat)animal;
}
```

---

#### **å…­ã€æ€»ç»“**

| **è½¬æ¢ç±»å‹** | **æ–¹å‘**        | **é£é™©**             | **ç¤ºä¾‹**                  |
| ------------ | --------------- | -------------------- | ------------------------- |
| è‡ªåŠ¨ç±»å‹è½¬æ¢ | å°ç±»å‹ â†’ å¤§ç±»å‹ | æ—                    | `long b = 100;`           |
| å¼ºåˆ¶ç±»å‹è½¬æ¢ | å¤§ç±»å‹ â†’ å°ç±»å‹ | å¯èƒ½æº¢å‡ºæˆ–ç²¾åº¦ä¸¢å¤±   | `int a = (int)3.14;`      |
| å­—ç¬¦ä¸²è½¬æ•°å­— | `String` â†’ æ•°å€¼ | æ ¼å¼é”™è¯¯æŠ›å¼‚å¸¸       | `Integer.parseInt("123")` |
| å¯¹è±¡å‘ä¸‹è½¬å‹ | çˆ¶ç±» â†’ å­ç±»     | `ClassCastException` | `(Cat)animal`             |

æŒæ¡è¿™äº›è§„åˆ™åï¼Œä½ å°±èƒ½å®‰å…¨é«˜æ•ˆåœ°å¤„ç† Java ä¸­çš„ç±»å‹è½¬æ¢ï¼ ğŸš€