vue的引用

## vue实例

vue实例的配置项众多，包括了生命周期钩子函数，DOM渲染相关选项，模板语法中数据的绑定，计算和监听等多个选项。

## 常用实例配置项简列：

Vue 实例提供了非常丰富的选项（`new Vue()`时传入的选项），除了上面介绍的生命周期之外，最常见的大概是这几个了：

表 3-2 Vue 实例常用选项

| 选项名       | 说明                                                         | 类型                                                         |
| ------------ | ------------------------------------------------------------ | ------------------------------------------------------------ |
| `el`         | 通过 CSS 选择器或者 `HTMLElement` 实例的方式，提供一个在页面上已存在的 DOM 元素作为 Vue 实例的挂载目标 | `string`/`Element`                                           |
| `template`   | 字符串模板，将会替换挂载的元素                               | `string`                                                     |
| `render`     | 字符串模板的代替方案，该渲染函数接收一个`createElement`方法作为第一个参数用来创建 `VNode` | `(createElement: () => VNode) => VNode`                      |
| `data`       | Vue 实例的数据对象，用于数据绑定                             | `Object`/`Function` 组件只支持`Function`                     |
| `props`      | 用于接收来自父组件的数据                                     | `Array<string>`/`Object`                                     |
| `methods`    | Vue 实例的事件，可用于事件绑定                               | `{ [key: string]: Function }`                                |
| `computed`   | 计算属性，用于简化模板的复杂数据计算                         | `{ [key: string]: Function or { get: Function, set: Function } }` |
| `watch`      | 观察 Vue 实例变化的一个表达式或计算属性函数                  | `{ [key: string]: string or Function or Object or Array }`   |
| `directives` | 自定义指令                                                   | `Object`                                                     |
| `filters`    | 过滤器                                                       | `Object`                                                     |
| `components` | 组件                                                         | `Object`                                                     |

Vue 实例中的这些选项，大多数都可以作为全局实例属性来获取或者访问:

```js
const vm = new Vue({
  // ...一些选项
});

vm.$data; // 获取 data
vm.$props; // 获取 props
vm.$el; // 获取挂载元素
vm.$options; // 获取 Vue 实例的初始选项
vm.$parent; // 获取父实例
vm.$root; // 获取根实例
vm.$children; // 获取当前实例的直接子组件
vm.$refs; // 获取持有注册过 ref 特性 的所有 DOM 元素和组件实例

vm.$watch; // 观察 Vue 实例变化的一个表达式或计算属性函数
vm.$set; // 向响应式对象中添加一个属性，并确保这个新属性同样是响应式的，且触发视图更新
vm.$delete; // 删除对象的属性。如果对象是响应式的，确保删除能触发更新视图
```

## 生命周期函数

生命周期要怎么理解呢？结合前言中浏览器页面渲染的机制，以及[《第1章 vue 框架介绍》](https://godbasin.github.io/vue-ebook/vue-ebook/1.html)中 vue 模板的解析和渲染的过程，我们知道在 vue 中要渲染一块页面内容的时候，会有这么几个过程：

1. 解析语法生成 AST(抽象语法树)。

   (`beforeCreate`)

2.  根据 AST 结果，完成 data 数据初始化。

   (`created`)

3.  根据 AST 结果和 data 数据绑定情况，生成虚拟 DOM。

   (`beforeMounte`)

4.  将虚拟 DOM 生成真正的 DOM 插入到页面中，此时页面会被渲染。

   (`mounted`)

当我们绑定的数据进行更新的时候，又会产生以下这些过程：

5. 框架接收到数据变更的事件，根据数据生成新的虚拟 DOM 树。比较新旧两棵虚拟 DOM 树，得到差异。

   (`beforeUpdate`)

6.  把差异应用到真正的 DOM 树上，即根据差异来更新页面内容。

   (`updated`)

当我们清空页面内容时，还有：

​        (`beforeDestroy`)

7.  注销实例，清空页面内容，移除绑定事件、监听器等。

   (`destroyed`)

所以在整个页面或是某块页面内容（组件）中，vue 提供了以下的一些关键的生命周期钩子：

表 3-1 vue 生命周期说明

| 生命周期钩子    | 说明                                                         | 对应上述步骤   |
| --------------- | ------------------------------------------------------------ | -------------- |
| `beforeCreate`  | 初始化实例前，`data`、`methods`等不可获取                    | 1 之后，2 之前 |
| `created`       | 实例初始化完成，此时可获取`data`里数据和`methods`事件，无法获取 DOM | 2 之后，3 之前 |
| `beforeMount`   | 虚拟 DOM 创建完成，此时未挂载到页面中，`vm.$el`可获取未挂载模板 | 3 之后，4 之前 |
| `mounted`       | 数据绑定完成，真实 DOM 已挂载到页面，`vm.$el`可获取真实 DOM  | 4 之后         |
| `beforeUpdate`  | 数据更新，DOM Diff 得到差异，未更新到页面                    | 5 之后，6 之前 |
| `updated`       | 数据更新，页面也已更新                                       | 6 之后         |
| `beforeDestroy` | 实例销毁前                                                   | 7 之前         |
| `destroyed`     | 实例销毁完成                                                 | 7 之后         |

## DOM渲染相关选项

1.虚拟节点如何挂载到页面上？

在渲染时，需要提供渲染模板的配置项，配置项的设置首先会看 `render`渲染函数，然后看 `template`配置项，最后再将html中的页面作为模板。

2.数据与vue实例的绑定？

数据绑定的指令

数据绑定的来源（配置项）

