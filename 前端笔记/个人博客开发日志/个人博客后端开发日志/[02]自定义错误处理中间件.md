## 自定义错误处理类：

在根目录下创建 `utils`文件目录，该文件目录主要存放项目中可能使用到的工具函数。

创建 `errors.js`，该模块为自定义错误处理中间件，负责对服务器中发生的错误进行处理。

首先需要定义错误类型，主要包括一下几类：

文件上传错误

数据访问错误

验证错误

无资源错误

其他错误

首先定义一个基类，然后在继承该错误类型的基础上定义其他错误类型。

```js
class ServiceError extends Error {
  /**
   * @param {*} message 错误消息
   * @param {*} code 错误消息码
   */
  constructor(message, code) {
    super(message);
    this.code = code;
  }
  toResponseJSON() {}
}

// 上传错误
exports.UploadError = class extends ServiceError {
  constructor(message) {
    super(message, 413);
  }
};
// 数据访问错误
exports.ForbiddenError = class extends ServiceError {
  constructor(message) {
    super(message, 401);
  }
};
// 验证错误
exports.ValidationError = class extends ServiceError {
  constructor(message) {
    super(message, 406);
  }
};
// 无资源错误
exports.NotFoundError = class extends ServiceError {
  constructor() {
    super("not found", 406);
  }
};
// 未知错误
exports.UnkownError = class extends ServiceError {
  constructor() {
    super("server internal error", 500);
  }
};

module.exports.ServiceError = ServiceError;
```

## 通用环境变量的保存

第三方库：https://www.npmjs.com/package/dotenv

安装第三方库：

```bash
npm i dotnet
```

在需要使用到环境变量的包之前引用并配置 `dotnet`

例：

在数据库引用前提前将 `dotnet`引入

```js
// 引入数据库
require("dotenv").config();
require("./dao/dbConnect");
```

编辑通用环境变量文件，默认为根目录下的 `.env`文件

```env
DB_NAME=mysite
DB_USER=root
DB_PASSWORD=mlbzdx
DB_HOST=localhost
```
