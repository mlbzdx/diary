工作区与暂存区文件的转换，主要涉及的操作有文件添加，文件删除和文件恢复(这里只介绍文件从暂存区恢复到工作区)

## 文件添加

`git`中的文件添加是指将经历过状态变化后的文件从工作区添加到暂存区。

文件添加的前提文件必须是未被跟踪的文件。

未被跟踪的文件即文件状态发送了变化，但该变化还没有添加到暂存区。这种情况通常包括新文件被创建、已添加暂存区的文件内容被修改、已添加暂存区的文件在工作区被删除等情况。

文件添加的操作命令：

```bash
# 添加指定文件到暂存区
$ git add [file1] [file2] ...

# 添加指定目录到暂存区，包括子目录
$ git add [dir]

# 添加当前目录的所有文件到暂存区
$ git add .

# 添加每个变化前，都会要求确认
# 对于同一个文件的多处变化，可以实现分次提交
$ git add -p
```

## 文件删除

`git`中的文件删除包括移除文件被跟踪状态，删除工作区文件等操作，其中删除工作区文件不是一定会执行的操作，但执行删除命令后一定会移除文件的被跟踪状态。

将文件从暂存区删除，可以通过三种操作来实现：

第一种是直接运用系统终端的命令或系统的图形化操作界面将文件删除，最后将删除这一变化添加到暂存区即可实现文件从暂存区的删除。

第二种是通过 `git rm` 命令来实现文件的删除。

如果执行的是如下命令：

```bash
# 删除工作区文件，并且将这次删除放入暂存区（强制删除）
$ git rm [file1] [file2] -f...
```

那么它的效果等同于第一种的效果，即工作区和暂存区的文件都会被删除。

第三中命令，可以只将暂存区的文件移除，即移除文件的被跟踪状态，工作区仍然保留该文件

```bash
# 停止追踪指定文件，但该文件会保留在工作区
$ git rm --cached [file]
```

## 文件恢复

文件恢复是一个涉及到多个区域的过程，这里只介绍暂存区到工作区的文件恢复。

文件恢复的适用情景：文件已经添加过暂存区，但是工作区内文件后续发送了变化（文件被删除，内容被修改，新文件被创建等），如果不想要这些变化，那么可以执行这一操作来恢复暂存区的文件内容到工作区。

文件恢复的操作命令：

```bash
# 恢复暂存区的指定文件到工作区，舍弃包括删改文件状态的变化
$ git checkout [file]
# 恢复暂存区的所有文件到工作区，舍弃包括删改文件状态的变化
$ git checkout .
# 恢复暂存区的指定文件到工作区,舍弃修改文件的状态变化
$ git restore <file>
# 恢复暂存区的所有文件到工作区,舍弃修改文件的状态变化
$ git restore .
$ git restore --staged .
# 恢复已删除的文件，舍弃删除这一文件状态的变化，执行命令前文件必须已经提交过
$ git restore --source=<commit> <file>
# 恢复已删除的所有文件，舍弃删除这一文件状态的变化，执行命令前文件必须依据提交过
$ git restore --source=<commit> .
```

`git restore` 命令在 Git 2.23 版本引入，用于替代之前的命令 `git checkout` 的一些功能，所以两者在文件恢复方面具有相同的效果，只是在恢复已经删除的文件方面有些许差异。在较旧的 Git 版本中，可能需要使用 `git checkout` 命令来执行相同的操作。
